/* =============== */
/* ALERT BAR       */
/* =============== */
.preview-alert {
  margin-bottom: 0;
  border-radius: 0;
  background-color: tint($brand-success, 90%);
  border-bottom: 10px solid $brand-success;
  color: shade($brand-success, 10%);

  & .preview-alert-msg {
    margin-right: 1em;
  }
}

#header-navbar {
  background: $dul-masthead-blue;
  min-height: 87px;
  padding-top: none;
  border-top: none;
  padding: 15px 0 10px 0;
  margin-bottom: 0;
  z-index: 100;

  box-shadow: 0 1px 1px rgba(0,0,0,0.06), 
              0 2px 2px rgba(0,0,0,0.06), 
              0 4px 4px rgba(0,0,0,0.06), 
              0 8px 8px rgba(0,0,0,0.06),
              0 16px 16px rgba(0,0,0,0.06);

  @include media-breakpoint-up(md) {
    padding-top: 5px;
  }

  .container {
    position: relative;
  }
  
  
  /* =============== */
  /* BRANDING / LOGO */
  /* =============== */
  #logo-col {
    padding-left: 0;
    @include media-breakpoint-up(lg) {
      min-width: 350px;
    }
    @include media-breakpoint-down(sm) {
      padding-left: 15px;
    }
  }


  .navbar-dul {
    margin-right: 20px;
    float: left;
    @include media-breakpoint-only(xs) {
      margin-right: 10px;
    }
    @include media-breakpoint-only(md) {
      margin-right: 10px;
    }

    .navbar-logo {
      width: 134px;
      height: 44px;
      background-size: cover;
      background-image: asset_url('dul-logos/dul-logo.png');
      margin-right: 0;
      margin-top: 0;
      @include media-breakpoint-only(xs) {
        background-image: asset_url('dul-logos/dul_devil.png');
        width: 22px;
        margin-top: -8px;
      }
      @include media-breakpoint-only(md) {
        background-image: asset_url('dul-logos/dul_devil.png');
        width: 22px;
        margin-top: -8px;
      }
    }
  }

  #search-col {
    margin-top: .5rem;
    margin-bottom: .25rem;

    @include media-breakpoint-up(sm) {
      padding-right: 0;
    }

    @include media-breakpoint-up(lg) {
      display: flex;
      justify-content: center;
      margin-bottom: 0;
    }

  }


  .navbar-product-name {
    float: left;
    padding: 0;
    margin: 0;
    text-transform: uppercase;
    a {
      &:hover, &:active, &:focus {
       text-decoration: none;
       .product-name-secondary {
         color: #ddd;
       }
      }
    }
    .product-name-primary {
      display: block;
      font-weight: bold;
      font-size: 26px;
      line-height: 19px;
      margin-top: 0;
      color: white;
      @include media-breakpoint-only(lg) {
        font-size: 24px;
        line-height: 16px;
        margin-top: 2px;
      }
      @include media-breakpoint-only(md) {
        font-size: 20px;
        line-height: 14px;
        margin-top: 0px;
      }
      @include media-breakpoint-down(sm) {
        font-size: 23px;
        line-height: 18px;
      }
    }
    .product-name-secondary {
      display: block;
      color: #ccc;
      font-size: 20px;
      margin-top: 1px;
      padding-top: 0;
      padding-left: 1px;
      @include media-breakpoint-only(md) {
        font-size: 18px;
      }
    }
  }

  /* =========== */
  /* SEARCH FORM */
  /* =========== */
  
  .within-collection-dropdown {
    width: auto !important;
  }

  .text-input-wrapper {
    flex: 1;
  }

  .twitter-typeahead {
    width: 100% !important;
  }

  .twitter-typeahead input {
    // border-radius: .25rem 0 0 .25rem !important;
    border-radius: 0 !important;
  }

  #within_collection {
    background-color: $gray-lighter;
    border-radius: .25rem 0 0 .25rem !important;
    &:hover, &:active, &:focus {
      background-color: shade($gray-lighter, 10%);
      cursor: pointer;
    }
  }

  .search-btn {
    background-color: $brand-success;
    border-color: shade($brand-success, 5%);
    &:hover, &:active, &:focus {
      background-color: shade($brand-success, 10%);
      border-color: shade($brand-success, 15%);
    }
  }
  
  /* ======++++===== */
  /* Advanced Search */
  /* =====++++====== */

  .search-extra-controls {
    font-size: .9rem;
    padding-top: .35rem;

    a.advanced_search,
    #bookmarks_nav {
      color: shade($gray-lighter, 8%);
      &:hover, &:active, &:focus {
        color: $gray-lightest;
      }
    }

    #bookmarks_nav {
      margin-left: 1.35rem;
      .bookmarks-label {
        padding-left: .15rem;
      }
    }

  }


  /* ============== */
  /* MASTHEAD LINKS */
  /* ============== */

  #user-util-collapse {
    float: right;
    /* Hide in mobile mode; use the #mobile-only-menu */
    @include media-breakpoint-up(sm) {
      display: none;
    }
    .navbar-nav {
      margin-bottom: 1rem;
      @media (max-width: 991px) {
        display: none;
      }

      > .open > a {
        color: white;
        background-color: transparent;
      }

      a {
        color: #ddd;
        text-transform: none;
        margin-bottom: 0;
        font-size: 15px;
        padding: 4px 7px 0 7px;
        @include media-breakpoint-up(lg) {
          padding: 4px 9px 0 9px;
        }

        &:hover {
          color: white;
          background-color: transparent;
          text-decoration: none;
        }

        &:focus {
          color: white;
          background-color: transparent;
        }
        
        & .nav-label {
          padding-left: .5rem;
        }
        
      }

      
      @include media-breakpoint-between(md, lg) {

        .nav-label,
        .nav-label-signedin {
          display: none;
        }

      }

    }
  }

  .dropdown-menu {
    background-color: $brand-secondary;

    .nav-label {
      display: inline-block !important;
    }

  }

  #mast-search .dropdown-menu {
    background-color: #fff;
  }

  .dropdown-toggle.current-user {
    text-overflow: ellipsis;
  }


  /* ============= */
  /* Mobile Toggle */
  /* ============= */

  #mobile-menu {
    position: absolute;
    top: 0;
    right: 0;

    @include media-breakpoint-up(md) {
      top: 0.5rem;
    }
    
    @include media-breakpoint-up(lg) {
      display: none;
    }

    @include media-breakpoint-down(sm) {
      top: -0.4rem;
    }


  }

  #mobile-menu span.fa-bars {
    padding-right: 15px;
  }

  @include media-breakpoint-up(sm) {
    #mobile-menu span.fa-bars {
      padding-right: 0;
    }
  }

  .btn.navbar-toggle {
    color: #ddd;
    font-size: 24px;
    background-color: inherit;
    border: none;
    padding: 0;
    margin: 0 0 0 0;
    &:hover {
      color: white;
    }
    &:not(.collapsed) {
     color: white;
    }
    &:focus {
      /* See https://ghinda.net/article/mimic-native-focus-css/ */
      outline-style: solid;
      outline-width: 3px;
      outline-offset: 2px;
      outline-color: Highlight;
      /* Chrome & Safari */
      @media screen and (-webkit-min-device-pixel-ratio:0) and (min-resolution:.001dpcm) {
        outline-color: -webkit-focus-ring-color;
        outline-width: 5px;
        outline-style: auto;
      }
      /* Firefox */
      @-moz-document url-prefix() {
        outline-width: 3px;
      }
    }

  }

  /* Patch the void between 768px & 991px where the shared DUL mast expects */
  /* to be fully in mobile mode but DUL catalog does not. This breakpoint   */
  /* mismatch complicates things a bit. */
  @media (max-width: 991px) {
    .btn.navbar-toggle.mobile-menu-right-toggle {
      display: block;
    }
  }

}

/* ====================== */
/* Mobile-Only Menu */
/* ====================== */

#mobile-only-menu {
  background: $brand-secondary;
  .navbar-nav {
    margin-top: 0;
    background: $brand-secondary;
    float: none;
    // margin: 0 -15px 10px -15px;
    li {
      width: 100%;
      position: relative;
      display: block;
    }
    a {
      padding: 10px;
      line-height: 22px;
      display: block;
      color: white;
      &:hover, &:focus {
        background: $brand-success;
      }
    }
  }

  .full-menu-toggle-wrapper {
    display: none;
  }

  @include media-breakpoint-up(lg) {
    display: none;
  }
}

/* ====================== */
/* DUL Masthead Overrides */
/* ====================== */
/* Just show the primary nav menu from the shared mast; hide the rest */
/* TODO: Consider adding a menu-only option to dul-masthead app, e.g., via */
/* a parameter, so the markup for these hidden elements doesn't render at all */

#dul-masthead-row {
  box-shadow: 0 1px 1px rgba(0,0,0,0.06), 
              0 2px 2px rgba(0,0,0,0.06), 
              0 4px 4px rgba(0,0,0,0.06), 
              0 8px 8px rgba(0,0,0,0.06),
              0 16px 16px rgba(0,0,0,0.06);
}

#dul-masthead-row, #dul-masthead-row .nav {
  background: $brand-secondary;
}

.dul-masthead-bar {
  #dul-masthead-dul-megamenu {
    height: auto;
    /* Hide all the parts of the shared mast that we won't use */
    .dul-masthead-region-logo,
    .dul-masthead-region-scoped-search,
    .dul-masthead-region-myaccount,
    #dul-masthead-logo,
    .dul-masthead-mobile-menu,
    #dul-masthead-nav-trigger-btn,
    .hide-link-text,
    li.dul-masthead-megamenu_button {
      display: none !important;
    }
    #dul-masthead-region-megamenu {
      display: none;
      margin-top: 0;
    }
    .dul-masthead-megamenu_container ul {
     padding: 0;

     li.dul-masthead-mega_toplevel {
       padding: 12px;
       > a {
         font-weight: 400;
         color: white;
       }
     }

     div.dul-masthead-dropdown_fullwidth {
      //  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
       border-top: none;
       margin-top: 5px;
       @include media-breakpoint-up(md) {
         border-left: 150px solid #eee !important;
       }
       @include media-breakpoint-up(lg) {
         border-left: 200px solid #eee !important;
       }
       box-shadow: 0px 8px 10px rgba(0, 0, 0, 0.5),
                   -10px 8px 15px rgba(0, 0, 0, 0.5), 
                   10px 8px 15px rgba(0, 0, 0, 0.5);
     }
    }

    .dul-masthead-no-touch ul li.dul-masthead-mega_toplevel:hover {
      background: $brand-success;
      border-top: 0;
      margin-top: 0 !important;
      > a {
        color: white;
      }
    }
    .dul-masthead-megamenu_container div.dul-masthead-dropdown_fullwidth a {
      color: $primary-link-color;
      &:hover {
        color: $link-hover-color;
        text-decoration: underline;
      }
    }
  }

  /* Don't display it at all in mobile mode */
  // @include media-breakpoint-up(sm) {
  //   display: none;
  // }
}


